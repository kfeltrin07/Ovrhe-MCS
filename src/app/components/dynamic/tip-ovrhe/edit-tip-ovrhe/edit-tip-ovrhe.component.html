<div class="colored-header text-align-center" cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle
    cdkDragBoundary=".cdk-overlay-container">
    {{ 'Editing' | translate }}
    <mat-icon class="dialog-close-button" mat-dialog-close>close</mat-icon>

</div>

<mat-dialog-content class="small-margin-and-center-title">

    <h2 mat-dialog-title class="text-align-center">
        <mat-icon class="dialog-title-icon">person</mat-icon>
        <mat-icon class="dialog-title-icon">add</mat-icon>
        <span class="dialog-title">{{ 'TipOvrheEditing' | translate }}</span>
    </h2>


    <div class="form-container">
        <table>
            <tr>
                <td>
                    <label for="IDSTATUSARADNJE" class="minimum-margin-top">{{ 'Code' | translate }}:</label>
                </td>
                <td></td>

                <td>
                    <input id="IDSTATUSARADNJE" class="minimum-margin width-276-px" [(ngModel)]="tipOvrhe!.IDTIPOVRHE"
                        [class.input-color-valid]="tipOvrhe!.IDTIPOVRHE" disabled
                        [class.red-input]="!globalFn.checkValidity(tipOvrhe!.IDTIPOVRHE)"
                        placeholder="{{ 'Code' | translate }}">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="NAZIVTIPAOVRHE" class="minimum-margin-top">{{ 'Name' | translate }}:</label>
                </td>
                <td></td>

                <td>
                    <input id="NAZIVTIPAOVRHE" class="minimum-margin width-276-px"
                        [(ngModel)]="tipOvrhe!.NAZIVTIPAOVRHE" [class.input-color-valid]="tipOvrhe!.NAZIVTIPAOVRHE"
                        [class.red-input]="!globalFn.checkValidity(tipOvrhe!.NAZIVTIPAOVRHE)"
                        placeholder="{{ 'Name' | translate }}">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="OZNAKATIPAOVRHE" class="minimum-margin-top">{{ 'OZNAKATIPAOVRHE' | translate }}:</label>
                </td>
                <td></td>

                <td>
                    <input id="OZNAKATIPAOVRHE" class="minimum-margin width-276-px"
                        [(ngModel)]="tipOvrhe!.OZNAKATIPAOVRHE" placeholder="{{ 'OZNAKATIPAOVRHE' | translate }}">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="IDTVRTKE" class="minimum-margin-top">{{ 'IDTVRTKE' | translate }}:</label>
                </td>
                <td>
                    <mat-icon matSuffix class="minimum-margin-left cursor-pointer display-flex" (click)="pickTvrtke();"
                        (contextmenu)="removeTvrtke($event)"
                        matTooltip="{{ (!tipOvrhe.IDTVRTKE ? 'ClickToSelectFromDialogToFill' : '') | translate }}"
                        [class.color-valid]="varNames.NAZIVTVRTKE">
                        {{ varNames!.NAZIVTVRTKE ? 'done' : 'import_contacts'}}
                    </mat-icon>
                </td>
                <td class="resultTD">
                    <span (click)="refreshTvrtke(tipOvrhe!.IDTVRTKE, false);">
                        <input [class.red-input]="!globalFn.checkValidity(tipOvrhe!.IDTVRTKE)" type="text"
                            [(ngModel)]="tipOvrhe!.IDTVRTKE" maxlength="22"
                            class="minimum-margin-horizontal light-gray-background" style="width: 50px;"
                            placeholder="{{ 'Code' | translate }}" id="offeredTvrtke-help-span"
                            (blur)="OfferedTvrtke();resetTvrtkeIndex();" (ngModelChange)="filterTvrtke(tipOvrhe!.IDTVRTKE);"
                            (focus)="refreshTvrtke(tipOvrhe!.IDTVRTKE, false);"
                            (keyup.enter)="selectTvrtke(offeredTvrtke[TvrtkeDropdownIndex]);"
                            (keyup.escape)="resetTvrtkeIndex();"
                            (keyup.arrowdown)="TvrtkeDropdownIndex = (TvrtkeDropdownIndex + 1) % offeredTvrtke.length;globalFn.scroll('offeredTvrtke-dropdown-'+TvrtkeDropdownIndex);"
                            (keyup.arrowup)="TvrtkeDropdownIndex = (TvrtkeDropdownIndex - 1 + offeredTvrtke.length) % offeredTvrtke.length;globalFn.scroll('offeredTvrtke-dropdown-'+TvrtkeDropdownIndex);">
                        <div id="offeredTvrtke-dropdown" class="select-dropdown-content max-height-300px"
                            style="z-index: 500;">
                            <div [id]="'offeredTvrtke-dropdown-' + i" *ngFor="let konto of offeredTvrtke; index as i"
                                matRipple class="dropdown-content-item display-flex align-items-center space-between"
                                [class.gray-background]="i == TvrtkeDropdownIndex" (mousedown)="selectTvrtke(konto);">
                                <span>
                                    <b>{{ konto.IDTVRTKE }}</b> ({{ konto.NAZIVTVRTKE }})
                                </span>
                            </div>
                        </div>
                    </span>
                    <span class="small-margin-left margin-right" matTooltip="{{ varNames!.NAZIVTVRTKE }}"
                        matTooltipShowDelay="1000">{{
                        varNames!.NAZIVTVRTKE }}</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="PREFIXPNB" class="minimum-margin-top">{{ 'PREFIXPNB' | translate }}:</label>
                </td>
                <td></td>
                <td>
                    <input id="PREFIXPNB" class="minimum-margin width-276-px" [(ngModel)]="tipOvrhe!.PREFIXPNB"
                        placeholder="{{ 'PREFIXPNB' | translate }}">
                </td>
            </tr>
            <tr>
                <td>
                    <label for="KONTO" class="minimum-margin-top">{{ 'KONTO' | translate }}:</label>
                </td>
                <td>
                    <mat-icon matSuffix class="minimum-margin-left cursor-pointer display-flex" (click)="pickKonto();"
                        (contextmenu)="removeKonto($event)"
                        matTooltip="{{ (!tipOvrhe.KONTO ? 'ClickToSelectFromDialogToFill' : '') | translate }}"
                        [class.color-valid]="varNames.NAZKONTO">
                        {{ varNames!.NAZKONTO ? 'done' : 'import_contacts'}}
                    </mat-icon>
                </td>
                <td class="resultTD">
                    <span (click)="refreshKonto(tipOvrhe!.KONTO, false);">
                        <input [class.red-input]="!globalFn.checkValidity(tipOvrhe!.KONTO)" type="text"
                            [(ngModel)]="tipOvrhe!.KONTO" maxlength="22"
                            class="minimum-margin-horizontal light-gray-background" style="width: 50px;"
                            placeholder="{{ 'Code' | translate }}" id="offeredKonto-help-span"
                            (blur)="OfferedKonto();resetKontoIndex();" (ngModelChange)="filterKonto(tipOvrhe!.KONTO);"
                            (focus)="refreshKonto(tipOvrhe!.KONTO, false);"
                            (keyup.enter)="selectKonto(offeredKonto[KontoDropdownIndex]);"
                            (keyup.escape)="resetKontoIndex();"
                            (keyup.arrowdown)="KontoDropdownIndex = (KontoDropdownIndex + 1) % offeredKonto.length;globalFn.scroll('offeredKonto-dropdown-'+KontoDropdownIndex);"
                            (keyup.arrowup)="KontoDropdownIndex = (KontoDropdownIndex - 1 + offeredKonto.length) % offeredKonto.length;globalFn.scroll('offeredKonto-dropdown-'+KontoDropdownIndex);">
                        <div id="offeredKonto-dropdown" class="select-dropdown-content max-height-300px"
                            style="z-index: 500;">
                            <div [id]="'offeredKonto-dropdown-' + i" *ngFor="let konto of offeredKonto; index as i"
                                matRipple class="dropdown-content-item display-flex align-items-center space-between"
                                [class.gray-background]="i == KontoDropdownIndex" (mousedown)="selectKonto(konto);">
                                <span>
                                    <b>{{ konto.SIFKONTO }}</b> ({{ konto.NAZKONTO }})
                                </span>
                            </div>
                        </div>
                    </span>
                    <span class="small-margin-left margin-right" matTooltip="{{ varNames!.NAZKONTO }}"
                        matTooltipShowDelay="1000">{{
                        varNames!.NAZKONTO }}</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="PROTUKONTO" class="minimum-margin-top">{{ 'PROTUKONTO' | translate }}:</label>
                </td>
                <td>
                    <mat-icon matSuffix class="minimum-margin-left cursor-pointer display-flex"
                        (click)="pickProtuKonto();" (contextmenu)="removeProtuKonto($event)"
                        matTooltip="{{ (!tipOvrhe.PROTUKONTO ? 'ClickToSelectFromDialogToFill' : '') | translate }}"
                        [class.color-valid]="varNames.PROTUNAZKONTO">
                        {{ varNames!.PROTUNAZKONTO ? 'done' : 'import_contacts'}}
                    </mat-icon>
                </td>
                <td class="resultTD">
                    <span (click)="refreshProtuKonto(tipOvrhe!.PROTUKONTO, false);">
                        <input [class.red-input]="!globalFn.checkValidity(tipOvrhe!.PROTUKONTO)" type="text"
                            [(ngModel)]="tipOvrhe!.PROTUKONTO" maxlength="22"
                            class="minimum-margin-horizontal light-gray-background" style="width: 50px;"
                            placeholder="{{ 'Code' | translate }}" id="offeredProtuKonto-help-span"
                            (blur)="OfferedProtuKonto();resetProtuKontoIndex();"
                            (ngModelChange)="filterProtuKonto(tipOvrhe!.PROTUKONTO);"
                            (focus)="refreshProtuKonto(tipOvrhe!.PROTUKONTO, false);"
                            (keyup.enter)="selectProtuKonto(offeredProtuKonto[ProtuKontoDropdownIndex]);"
                            (keyup.escape)="resetProtuKontoIndex();"
                            (keyup.arrowdown)="ProtuKontoDropdownIndex = (ProtuKontoDropdownIndex + 1) % offeredProtuKonto.length;globalFn.scroll('offeredProtuKonto-dropdown-'+ProtuKontoDropdownIndex);"
                            (keyup.arrowup)="ProtuKontoDropdownIndex = (ProtuKontoDropdownIndex - 1 + offeredProtuKonto.length) % offeredProtuKonto.length;globalFn.scroll('offeredProtuKonto-dropdown-'+ProtuKontoDropdownIndex);">
                        <div id="offeredProtuKonto-dropdown" class="select-dropdown-content max-height-300px"
                            style="z-index: 500;">
                            <div [id]="'offeredProtuKonto-dropdown-' + i" *ngFor="let konto of offeredProtuKonto; index as i"
                                matRipple class="dropdown-content-item display-flex align-items-center space-between"
                                [class.gray-background]="i == ProtuKontoDropdownIndex"
                                (mousedown)="selectProtuKonto(konto);">
                                <span>
                                    <b>{{ konto.SIFKONTO }}</b> ({{ konto.NAZKONTO }})
                                </span>
                            </div>
                        </div>
                    </span>
                    <span class="small-margin-left margin-right" matTooltip="{{ varNames!.PROTUNAZKONTO }}"
                        matTooltipShowDelay="1000">{{
                        varNames!.PROTUNAZKONTO }}</span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="TIPDOKUMENTAERP" class="minimum-margin-top">{{ 'TIPDOKUMENTAERP' | translate }}:</label>
                </td>
                <td></td>

                <td>
                    <input id="TIPDOKUMENTAERP" class="minimum-margin width-276-px"
                        [(ngModel)]="tipOvrhe!.TIPDOKUMENTAERP" placeholder="{{ 'TIPDOKUMENTAERP' | translate }}">
                </td>
            </tr>
        </table>
    </div>

</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button [mat-dialog-close]="true">{{ 'Cancel' | translate }}</button>
    <button mat-raised-button type="button" color="primary" [mat-dialog-close]="true" (click)="save();"
        [disabled]="validateForm(tipOvrhe!)">{{ 'Create' | translate }}</button>
</mat-dialog-actions>